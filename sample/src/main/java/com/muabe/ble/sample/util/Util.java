package com.muabe.ble.sample.util;

import android.app.AlertDialog;
import android.content.Context;
import android.content.DialogInterface;
import android.content.Intent;
import android.location.LocationManager;

public class Util {

    public static boolean isGps(final Context context) {
        LocationManager locationManager = (LocationManager) context.getSystemService(Context.LOCATION_SERVICE);

        boolean isOn =  locationManager.isProviderEnabled(LocationManager.GPS_PROVIDER);

        if(!isOn) {
            AlertDialog.Builder builder = new AlertDialog.Builder(context);
            builder.setTitle("위치 서비스 활성화");
            builder.setMessage("해당 기능을 사용하기 위해서는 위치 서비스가 필요합니다.\nGPS 센서가 활성화(ON) 후 다시 시도 해주세요");
            builder.setCancelable(true);
            builder.setPositiveButton("설정", new DialogInterface.OnClickListener() {
                @Override
                public void onClick(DialogInterface dialog, int id) {
                    Intent callGPSSettingIntent
                            = new Intent(android.provider.Settings.ACTION_LOCATION_SOURCE_SETTINGS);
                    context.startActivity(callGPSSettingIntent);
                }
            });
            builder.setNegativeButton("취소", new DialogInterface.OnClickListener() {
                @Override
                public void onClick(DialogInterface dialog, int id) {
                    dialog.cancel();
                }
            });
            builder.create().show();
        }
        return isOn;
    }


    public static byte[] getRawBytes(int x, int y){
        byte[] data = Util.hexStringToByteArray(Util.toHex(x)+Util.toHex(y));
        return data;
    }

    public static String toHex(int num){
        String hex = Integer.toHexString(num);
        int size = 4-hex.length();
        for(int i=0; i<size; i++){
            hex = "0"+hex;
        }
        return hex.substring(2,4)+hex.substring(0,2);
    }


    public static byte[] hexStringToByteArray(String s) {
        int len = s.length();
        byte[] data = new byte[len / 2];
        for (int i = 0; i < len; i += 2) {
            data[i / 2] = (byte) ((Character.digit(s.charAt(i), 16) << 4)
                    + Character.digit(s.charAt(i+1), 16));
        }
        return data;
    }

    public static byte[] int32ToBytes(int value){
        byte[] byteArray = new byte[4];
        byteArray[3] = (byte)(value >> 24);
        byteArray[2] = (byte)(value >> 16);
        byteArray[1] = (byte)(value >> 8);
        byteArray[0] = (byte)(value);
        return byteArray;
    }

    public  int byteArrayToInt(byte bytes[]) {
        return ((((int)bytes[0] & 0xff) << 24) |
                (((int)bytes[1] & 0xff) << 16) |
                (((int)bytes[2] & 0xff) << 8) |
                (((int)bytes[3] & 0xff)));
    }


    public static byte[] testData(){
        byte[] b = {-119,80,78,71,13,10,26,10,0,0,0,13,73,72,68,82,0,0,0,72,0,0,0,72,8,6,0,0,0,85,-19,-77,71,0,0,13,-48,73,68,65,84,120,-38,-19,92,105,80,84,87,26,77,50,73,-43,-84,85,-7,-111,-102,-52,100,-4,-111,-86,-87,-55,-97,-92,84,92,81,-10,102,-23,6,26,16,5,-9,45,36,-110,113,-119,11,2,-78,53,116,-77,-17,-88,73,92,48,-119,58,113,-119,-118,10,81,-63,24,89,-108,125,95,68,64,-96,27,-48,84,-116,73,76,-30,18,68,-97,-42,-103,-17,123,72,-60,-26,61,19,65,4,41,94,-43,-87,110,-34,121,125,-17,-3,14,-9,126,-33,-71,-81,-105,-25,-98,27,61,70,-113,-47,99,-12,24,61,-98,-15,3,120,-34,58,87,-5,-30,72,2,-57,-12,68,-76,-47,66,-5,-62,72,-3,-65,15,56,-74,-34,13,-40,-24,-93,-99,20,-122,-24,8,-123,62,38,89,-47,26,-109,104,-93,-113,77,114,50,36,37,-71,-73,111,78,-30,-25,82,80,27,82,-110,-36,13,-101,100,121,87,-30,103,60,-126,103,-114,-81,-111,-29,-71,109,-11,-93,120,26,27,-113,-111,-97,-13,-104,-59,-79,83,12,28,-53,-128,69,-22,121,-31,-68,111,-74,-65,-94,110,75,-50,85,27,-110,-64,112,-42,63,-64,-36,-74,-113,-16,78,-57,-57,15,-99,-21,-115,-7,109,91,-15,118,-5,14,89,126,81,-37,54,44,105,-33,46,-53,51,-57,-41,-56,-15,-36,54,-9,33,-57,-13,-40,120,-116,-58,-25,-69,99,73,-50,-99,119,33,-15,-107,-2,-119,-44,107,125,-70,24,-110,-13,44,90,34,96,113,33,92,48,-122,115,75,-94,48,-89,-3,3,65,-118,99,-72,-76,38,11,-98,6,121,-34,-83,53,69,-104,105,-40,36,-53,51,-57,-41,-56,-15,-36,54,-9,33,-57,-13,-40,120,-116,-110,60,-59,-28,84,31,115,-106,66,124,-63,56,-26,-33,60,-60,36,70,-121,109,99,-124,-38,-43,-112,-36,45,78,51,-119,100,4,-25,-42,-18,89,36,-59,49,92,-11,41,-104,109,-8,80,-106,-97,-95,-33,-120,89,-122,-51,-78,60,115,124,-115,28,-49,109,115,31,114,-68,56,123,104,-116,-110,124,75,-124,-32,-36,24,-113,-23,95,-82,-11,-24,29,-13,-29,8,-12,-68,77,125,120,-36,-120,21,-88,57,92,80,-73,36,98,-6,41,-97,77,28,107,127,4,122,-63,-70,70,-69,-43,69,63,66,5,18,83,64,18,76,79,-83,-1,84,-116,-75,31,2,-67,104,89,30,-70,109,-60,10,-44,124,95,-96,19,107,119,114,-84,-3,18,-56,-86,92,-77,125,-60,11,-108,-71,118,87,-65,5,-78,-85,-48,-91,-50,105,-5,16,-86,-106,120,65,-43,-102,0,99,-16,0,-71,-108,74,113,-116,121,109,91,-80,-76,61,85,-106,95,64,37,122,49,-107,114,57,-98,57,-66,70,-114,-25,-74,-71,15,57,-98,-57,-58,99,-108,-30,28,91,-29,-123,57,-6,15,96,-98,-23,-69,-69,-33,2,57,87,70,-90,122,117,-20,-128,71,-5,102,-63,-77,-19,3,24,-61,-117,6,-80,-6,-46,103,-112,-30,24,-53,58,62,-63,-54,-117,-69,101,-7,-9,46,-18,-60,-14,-117,-69,100,121,-26,-8,26,57,-98,-37,-26,62,-28,120,30,27,-113,81,-118,-13,-24,-40,44,-68,-35,-106,10,-37,-109,27,-6,47,-112,85,89,72,-22,72,95,98,-45,78,-84,25,21,104,84,-96,81,-127,70,5,26,21,104,68,10,-28,80,17,-111,-54,62,-61,-71,53,65,112,-42,39,-62,24,-52,113,-103,-107,-30,24,-34,29,-97,-30,-8,-49,85,-104,-49,109,72,-16,-20,115,-40,-53,-56,-67,-98,-71,-59,-30,-19,-112,-66,-36,-37,100,63,78,-2,92,-5,-56,-2,-103,-101,39,-45,-73,90,-97,32,-52,-45,127,4,-85,76,-65,-2,11,-28,88,17,-103,-54,-125,116,55,108,-28,91,15,48,6,115,-85,-56,-117,72,113,-116,21,-28,99,-38,-69,-66,-57,49,18,-119,103,-125,49,-49,1,-68,-41,-79,83,-10,-11,-52,-15,53,-58,-25,61,-88,-83,-100,-21,13,98,-37,-36,-121,-36,-21,121,108,60,70,41,-50,-67,125,-93,-80,-60,-80,29,54,-103,67,-20,-125,62,-6,-18,52,-82,-34,-71,-127,69,-19,-37,-98,-40,18,91,117,105,55,-82,11,-99,-40,124,-27,-44,-77,-97,-125,88,-104,51,-41,27,113,-10,122,19,44,101,4,-30,-13,-106,-51,-111,-80,-70,15,126,46,39,16,115,-43,-65,-76,-117,109,114,-37,35,34,73,-13,-83,-45,27,-62,45,-84,-1,122,-33,-81,-100,-94,37,6,-66,95,-17,-57,-10,-17,114,112,-32,-57,98,-100,-8,-71,26,-91,55,90,81,116,-93,-103,-98,87,97,-17,-43,66,108,-5,46,27,107,104,-69,96,-35,18,-11,-21,-21,-62,47,-89,-29,38,-75,-59,109,-114,-104,42,102,69,1,126,78,34,-24,111,93,17,69,-55,-8,-87,2,87,-18,92,-61,-19,-69,2,-18,-34,-69,-117,123,-9,-18,73,-126,-71,-37,119,-17,-32,-37,-37,63,-29,-32,-113,37,-16,33,-127,47,-33,-2,73,20,-113,-37,28,57,2,-47,-78,8,-7,-26,16,5,124,15,-99,119,111,-53,10,-14,91,-24,-68,-37,37,62,6,83,91,-36,-26,-120,16,-120,-85,-48,-25,87,-117,112,77,-8,-91,-33,-62,24,-125,-37,-30,54,-71,-19,33,21,72,73,62,104,97,-37,86,-88,91,-109,4,22,-54,24,124,-81,-122,111,71,72,113,-116,-75,-105,-10,-32,124,-25,-91,71,46,-93,-2,-126,-37,-84,-3,-91,67,-20,67,-82,127,30,27,-113,81,-118,83,-21,-109,-124,-123,-6,45,3,-11,65,17,-87,108,-44,-36,12,41,-62,12,-61,70,24,-125,57,-66,103,35,-59,113,66,-66,-40,-11,-61,19,23,-58,24,-36,7,-25,38,-87,49,-16,-40,120,-116,82,-100,91,123,-118,-80,-40,-80,-115,124,-112,-33,-45,95,98,92,-98,-71,20,15,-74,56,61,-88,-68,105,-112,-12,83,-61,50,7,113,-7,-50,-66,86,-1,-44,-60,-23,65,-10,-75,115,98,-33,-61,94,-96,-108,43,89,98,-7,54,14,-32,-121,-50,107,56,-46,124,6,-33,-34,-68,-38,111,17,-66,-66,-7,61,-46,-37,11,113,-11,-42,-75,62,28,-9,-103,-4,109,-42,-16,22,-120,-9,72,63,-36,-71,-34,103,-16,55,111,119,98,-31,-55,40,-116,-35,-29,-123,-39,89,58,92,-17,122,-4,-118,-10,83,-41,13,56,-97,-42,96,-62,23,43,-31,93,-76,9,-99,119,-70,-6,92,-13,125,-41,53,-52,-72,-112,52,124,5,-38,79,-91,87,-86,98,-79,32,-77,-114,-121,98,-20,94,47,-40,-91,-5,-30,-57,91,-41,31,91,-96,31,104,-42,88,101,-7,97,-62,-79,-107,88,112,54,30,55,-17,116,74,86,-74,-35,-19,57,48,59,23,54,-4,4,82,-74,-58,-29,71,-38,-108,-54,-107,-28,-78,-53,-115,-48,-106,-20,66,-34,-91,26,8,18,75,-16,-73,32,-36,-67,-117,-4,111,-21,17,94,-69,15,53,87,-11,-94,-23,-108,19,-46,-6,108,-112,40,-46,-96,11,-12,56,101,62,-23,74,-90,-20,-96,-97,38,-8,-97,17,125,-2,32,28,10,-62,-32,-35,-78,-125,-58,-72,109,-16,-54,-4,-17,53,-118,-36,97,-2,-115,-90,33,23,-25,-41,-118,118,-71,26,14,103,52,88,84,-102,-116,-71,23,62,24,60,-93,-8,123,-105,-104,109,75,-84,-72,-119,28,46,2,125,-45,121,21,22,103,2,-32,90,16,1,-37,-94,48,-104,-43,107,-121,54,7,-51,50,108,26,54,-30,-12,-64,-79,80,11,-41,-62,72,40,-14,53,-104,90,-72,1,-26,-25,-75,67,39,-48,-54,-114,93,-8,-27,-50,-83,62,-32,82,-52,-112,-30,-6,-14,93,125,-16,-128,-105,-128,64,-36,35,-32,93,-67,-123,4,-118,-126,109,1,9,-108,-17,7,-45,34,99,-111,-98,-94,64,-26,-115,58,-79,-4,-78,-49,-31,82,62,118,-33,59,34,-52,15,-68,15,69,-102,15,-58,29,88,-122,113,7,-105,97,-4,33,111,-116,79,123,-81,27,-121,-1,11,-21,-12,-11,80,124,-31,7,-109,-12,-27,48,-55,88,65,30,103,-123,-24,115,-72,-83,9,-57,87,-63,-18,100,32,108,-65,12,-64,-60,-84,-9,49,-15,-28,106,17,-109,-66,92,-125,73,-89,8,95,-83,-123,83,110,24,108,115,-126,49,57,103,29,-63,71,-60,-108,-36,-11,-104,-110,71,56,-29,11,-73,34,18,-88,48,20,83,11,-4,69,-104,22,7,-64,-68,65,59,52,101,94,20,-119,-126,-22,17,103,-36,-2,119,97,113,104,53,20,-121,125,36,-59,49,57,66,2,125,-79,30,-74,-57,-4,36,-59,-103,112,98,21,-20,-65,36,-127,78,5,74,-118,51,-23,52,9,-108,71,2,-27,6,75,-118,51,-27,-84,31,-36,-118,-93,41,7,-35,23,-120,-106,-39,84,-102,69,-45,74,3,73,36,-35,-48,24,69,-18,120,98,-26,-5,24,-9,-7,-69,34,68,-127,-114,-8,72,-118,99,114,116,57,108,-114,-7,-62,-10,-72,-65,-92,56,-36,-114,-3,-87,32,-40,126,21,40,41,-50,-28,-20,117,112,58,-93,-123,109,94,-120,-92,56,-68,-84,-36,74,-94,97,71,73,-70,71,28,-98,65,-90,37,1,-104,86,30,68,-1,80,-19,-109,-16,65,-113,-1,-74,-113,123,115,10,-108,-89,-125,97,125,120,29,-44,71,3,49,51,67,3,-101,-93,62,-80,-95,-27,-60,80,100,-8,66,65,-62,40,-114,-5,-63,61,43,12,-77,78,-22,96,-101,-71,1,-74,89,27,104,73,5,-64,-114,-106,-108,29,-51,26,-5,-81,-126,48,59,39,10,-98,4,-121,-20,96,56,-28,-124,-120,80,-26,106,-96,-52,-45,64,117,38,20,11,10,19,48,-69,32,22,-114,-7,90,56,22,16,10,117,112,44,10,-121,83,49,-95,36,2,111,87,108,-58,-100,-14,68,56,-105,69,-63,-71,60,10,-22,10,66,101,52,-44,85,49,80,-41,-60,8,-117,91,-74,12,-20,109,-97,-2,-66,113,-88,106,-118,-125,-43,105,127,40,-45,-3,-31,-110,65,-1,-83,35,107,96,126,116,13,44,-46,-41,-62,34,-125,112,108,29,-63,7,-22,-84,16,-72,102,105,96,121,98,61,44,51,125,97,-103,-27,11,-85,-109,126,-80,58,-59,-16,-121,123,78,56,-36,114,116,-80,-54,-34,0,-21,-20,0,88,-25,4,-64,38,39,16,54,-71,-124,-68,32,81,-100,25,5,92,-87,66,-96,-96,100,-84,40,-44,-120,57,-121,-105,-107,109,113,24,22,-108,39,-61,-67,60,22,118,101,58,-40,-107,-21,96,95,17,46,-62,-95,-110,-100,127,85,-72,-32,89,-105,4,-13,99,62,67,115,-53,-107,43,-122,77,118,32,-19,-67,-4,30,90,86,-67,19,-78,-30,-124,63,-20,104,-10,-12,94,86,-67,19,-78,-61,-23,16,-40,-47,-20,-23,-67,-84,122,39,100,-25,124,10,58,63,-12,-95,101,-43,-109,-112,121,89,-51,40,-117,-123,125,-87,78,92,86,-90,-108,123,76,-53,2,49,-83,44,72,92,98,-45,42,66,4,85,117,20,38,29,89,49,116,-9,-92,-43,77,9,112,-50,9,-109,20,-121,115,-114,34,-109,4,-54,10,-112,20,-121,115,-114,50,-101,4,-94,42,37,37,14,-25,28,117,1,-51,8,-38,82,72,-119,-61,57,-57,-67,-126,4,-94,-39,-45,87,-100,96,76,-85,12,17,28,107,-94,48,-27,-48,-118,-95,-67,105,-17,-39,-68,73,12,-50,36,-93,111,41,87,-120,121,39,80,82,28,78,-56,-54,28,13,-20,41,-17,72,-119,-61,9,89,93,24,1,-5,-62,48,73,113,56,33,-69,87,-58,-63,-66,60,92,66,-100,96,76,-81,-46,8,-114,-75,-47,-104,114,100,-59,-48,-65,-19,-61,22,-128,-125,52,-82,86,-118,-109,27,-60,82,46,-25,115,84,44,80,110,-120,-84,-49,81,23,69,-64,-127,28,-77,-108,56,-68,-84,88,32,7,-54,57,125,-59,9,-63,-12,106,18,-88,46,102,120,8,36,-2,-35,20,46,6,-40,-69,-108,-77,9,-28,82,46,-25,115,84,-71,-95,112,-96,-118,37,-25,115,92,-118,35,-31,80,-92,-107,20,-121,-105,-43,-52,-86,120,18,40,66,66,28,66,77,-88,-32,116,110,56,9,-60,-119,-101,68,-30,32,123,114,-114,-83,88,-50,-125,101,125,-114,42,47,84,-36,-107,-53,-7,28,-105,18,18,-88,88,39,41,14,47,-85,-103,-43,9,98,-59,-22,43,-114,6,-45,107,-97,-128,64,-125,-15,49,96,-113,-42,77,98,-18,96,-81,-60,62,103,110,78,12,84,-39,26,113,57,57,-26,-124,-62,-111,102,13,59,100,-89,51,97,-94,-49,-103,79,112,46,-48,-63,-71,48,92,4,47,43,117,113,-124,40,14,-5,28,46,-27,46,101,-47,112,-83,-120,-127,107,37,35,22,-82,85,-79,112,-85,-114,-125,-9,-71,109,88,88,-73,25,51,106,-29,49,-93,46,1,-18,-11,-119,-35,56,-97,4,-9,-122,68,97,113,-45,71,-28,-51,6,-16,57,-23,-63,-6,32,-71,-61,-123,88,88,23,4,-61,37,91,43,-6,28,75,-14,76,-106,-28,117,-84,114,24,1,-80,-54,37,-28,-47,12,40,-120,18,125,14,-33,33,-76,-50,39,-13,89,16,2,-101,66,66,-111,70,-60,-100,-14,4,-47,-25,40,74,-61,-96,40,35,-108,107,-95,-88,32,119,93,65,-26,-77,82,39,-118,-29,94,-101,0,-69,-102,8,-40,-43,70,-62,-66,-114,112,46,74,-124,-78,62,74,-16,104,76,-127,89,-6,-38,-31,-7,17,60,78,-36,-54,34,2,85,41,57,-97,-61,14,89,-103,31,38,-21,115,92,105,-26,40,-53,-62,101,124,78,48,102,-43,38,66,73,-91,-4,-63,-78,-46,-64,-84,54,20,102,117,-95,124,75,86,112,110,-120,-61,-108,-12,-9,-5,47,-112,101,-39,-32,126,87,-61,-83,57,25,106,90,42,114,62,-57,-111,-106,-106,-110,-74,16,114,62,-57,-75,60,6,-54,-14,8,25,-97,67,2,-111,83,86,81,41,-105,16,7,102,-11,36,80,99,28,76,51,86,-9,-1,-69,26,86,21,-95,-125,-2,33,-50,-103,45,27,41,96,127,-55,82,-18,68,70,80,-59,101,92,-58,-25,112,-34,81,81,-107,-110,-10,57,33,-16,-88,79,-122,-86,46,90,74,28,-104,-77,64,77,-15,-104,114,108,-51,64,102,80,-56,-58,-89,-15,-123,58,-82,110,28,-76,113,-75,114,-94,-92,-84,-94,101,40,-25,115,-36,40,33,-85,42,34,101,124,-50,125,-127,-88,82,-11,17,-121,-74,65,-26,13,-35,2,77,78,91,-111,-38,111,-127,-56,-122,47,22,103,80,115,-72,96,126,33,124,112,63,6,76,34,113,-32,-67,75,-71,19,85,44,85,-79,78,-42,-25,-72,85,-59,65,85,25,41,-29,115,52,-16,56,-97,-46,45,-112,-111,56,102,-25,-23,-79,73,39,58,-23,-73,82,-26,44,-25,88,39,110,-9,126,-23,113,-65,-44,-5,7,-62,63,-19,-50,-122,84,-119,-30,-76,68,8,44,84,111,-88,91,19,-123,57,29,31,-10,57,-33,3,18,87,-16,-28,47,-3,-54,-16,110,-6,20,97,102,-5,-90,7,-25,46,-24,4,-45,-110,64,97,-54,89,127,97,106,-66,-65,-96,46,14,23,28,-117,117,-62,-44,-62,0,97,106,81,-128,96,90,28,40,-14,-90,-91,65,-126,105,89,-112,64,-27,92,112,-86,-118,20,120,-29,-55,123,43,-34,62,-80,67,102,19,-56,62,-57,-93,33,69,112,-86,-113,17,56,33,115,-50,49,63,79,-96,-103,-61,-30,-104,53,104,97,-7,-59,-70,90,-118,113,-116,24,-21,-29,-2,-48,-128,-25,65,79,22,-24,-27,49,-10,38,86,-106,89,-66,-75,-54,-38,40,56,53,-109,39,105,77,-4,21,115,-11,31,-62,-85,109,-57,67,-25,122,99,-66,-98,-54,-68,33,85,-106,95,-92,-33,10,126,111,-22,-95,-13,-44,-121,3,-19,-97,-20,-118,66,-31,89,26,15,-113,-46,56,-40,-107,-124,-47,-82,92,75,27,79,66,-71,-114,120,-99,-72,-123,88,80,67,123,-67,26,-86,84,-43,-28,-85,106,34,41,33,71,81,-50,33,-100,-117,-122,35,97,73,-45,22,120,54,110,-124,99,67,44,-100,26,9,77,113,34,-108,-43,-111,-80,72,95,87,-9,47,-59,-101,10,-114,-47,90,107,-3,-30,115,-3,57,94,-73,126,-3,-113,-12,-16,26,97,-4,27,26,-105,-96,-15,59,-105,-18,-99,-80,-33,-5,-80,-55,-98,119,15,-103,-20,-13,78,51,-35,-73,60,-51,-30,-64,-22,52,126,110,-78,119,89,-9,99,-49,115,-126,-23,-66,-107,105,22,-5,86,61,-32,-116,-82,-103,78,-68,25,-13,18,-36,-40,-44,37,105,-109,-73,46,37,120,-91,-115,-35,-70,-88,27,-37,9,-87,-117,68,110,-20,-10,37,105,-90,-97,120,-89,77,-2,-8,-99,-76,113,-97,44,-67,-113,37,-35,-40,-23,-107,54,110,-105,87,-102,-39,-82,-27,105,-109,-1,71,-19,-19,122,39,-51,-28,51,26,-13,-98,119,15,-113,-3,120,-23,94,-114,-123,99,-30,-40,-58,76,27,-13,-89,-127,-4,-8,-62,-13,-81,77,124,-19,-49,-12,-8,15,-62,127,8,111,18,-34,122,-58,-15,-26,-3,88,94,125,117,-20,-85,127,-31,24,7,-2,35,23,19,39,-66,-12,-14,-8,-41,95,-2,-37,27,-81,-67,-14,-41,127,-65,-6,-9,103,25,28,3,-57,-62,49,13,-58,-17,-127,60,63,66,48,122,-116,30,-93,-57,-24,-15,76,28,-1,7,-64,1,56,-95,-7,46,9,7,0,0,0,0,73,69,78,68,-82,66,96,-126};
        return b;
    }
}
